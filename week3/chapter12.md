# 함수
## 함수의 정의
- 수학에서의 함수는 입력을 받아 출력을 하는 것
- 프로그래밍 언어에서 함수는 일련의 과정을 문으로 구현하고 코드 블록으로 감싸서 하나의 실행 단위로 정의한 것
- 매개변수, 인수, 반환값으로 구성
- 일반 객체는 호출할 수 없지만 함수는 호출 가능
- 고유 프로퍼티 소유
- **js에서 함수(자유롭게 사용 가능)**
    - 값처럼 변수에 할당 가능
    - 프로퍼티의 값 될 수 있음
    - 배열의 요소 될 수 있음

console.dir → 함수 객체 프로퍼티까지 출력 (node.js에선 console.log와 같은 역할 함)

### 함수 사용 이유
- 필요 시 여러 번 호출 가능 (**코드의 재사용**) - 유지보수의 편의성, 코드의 신뢰성, 코드의 가독성
- 실행 시점 개발자가 결정 가능

### 함수 리터럴
- function 키워드, 함수 이름, 매개변수 목록, 함수 몸체로 구성

### 정의 방법
- 함수 선언문, 함수 표현식, Function 생성자 함수, 화살표 함수로 구성
- **함수 선언문**
    - 함수 리터럴과 형태가 동일하지만 함수 이름을 생략할 수 없다. (SyntaxError뜸)
    - 표현식이 아닌 문이다.
    - 함수 객체를 생성할 수 있으며 호출이 가능하다
    - 암묵적으로 js 엔진이 식별자 생성
    - 함수 이름으로 호출하는 것이 아닌 함수 객체를 가리키는 식별자로 호출
    - 함수 선언문 이전에 호출 가능
        - var 키워드로 선언된 변수가 undefined로 초기화되고 암묵적으로 생성된 식별자가 함수 객체로 초기화됨
- **함수 리터럴 표현식**
    - 함수 리터럴을 변수에 할당하거나 피연산자로 사용하면 함수 리터럴 표현식으로 해석
    - 함수 객체를 생성할 수 있으나 호출이 불가하다.
    - 함수 이름 생략 가능
    - 표현식 이전에 호출 불가
        - 변수 호이스팅에 의해 undefined로 초기화 되지만 함수 표현식은 할당문이 실행되는 시점에 평가됨
- **함수 호이스팅:** 함수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징
    - 함수를 호출하기 전 함수를 선언해야 한다는 규칙을 무시하기에 더글라스 크락포드는 함수 표현식을 권장
- **Function 생성자 함수**
    - 생성자 함수: 객체를 생성하는 함수
    - 바람직하지 않은 방법임. 함수 선언문이나 함수 표현식으로 생성한 함수와 다르게 동작
- **화살표 함수(⇒)**
    - 기존 함수보다 표현과 내부 동작이 간단함

### 함수 호출
- 함수를 가리키는 식별자와 한 쌍의 소괄호인 함수 호출 연산자로 호출
- 0개 이상의 인수를 쉼표로 구분해 나열
- 함수 호출 시 실행 흐름을 중단하고 호출된 함수로 실행 흐름 옮김
- **매개변수와 인수**
    - 값으로 평가될 수 있는 표현식이어야 함.
    - 함수 몸체 내부에서 변수와 동일하게 취급되며 일반 변수와 마찬가지로 undefined로 초기화된 후 할당된다.
    - 매개변수는 몸체 내부에서만 참조 가능하며 몸체 외부에서는 참조할 수 없다. (스코프=함수 내부)
    - 매개변수와 인수의 개수를 체크하지 않으며 달라도 에러가 나지 않는다.
        - 적으면 나머지는 undefined로 초기화되고 많으면 무시된다. (arguments 객체의 프로퍼티로 보관된다. )
        - 인수가 전달되지 않았을 경우 단축평가를 사용해 매개변수에 기본값을 할당하는 방법도 있다.
    - 매개변수 타입을 사전에 지정할 수 없다.
        - 확인을 위해선 타입스크립트를 사용하거나 코드로 적절한 인수가 전달되었는지 확인하는 방법이 있다.
    - 개수와 타입에 제한이 없지만 이상적인 매개변수의 개수는 0개이며 이상적인 함수는 한 가지 일만 해야 하기에 최대 3개 이상을 넘지 않는 것을 권장 → 그 이상이 필요하다면 하나의 매개변수 선언하고 객체를 인수로 전달

### 반환문
- return 키워드와 표현식으로 이뤄진 반환문을 사용해 실행 결과를 함수 외부로 반환한다.
- 반환 이후에 다른 문이 존재하면 그 문은 무시된다.
- return 키워드 뒤에 반환값으로 사용할 표현식을 명시적으로 지정하지 않으면 undefined를 반환한다.
- 반환문은 함수 몸체 내부에서만 사용 가능(SyntaxError뜸)하나 node.js는 모듈 시스템에 의해 파일별로 독립적인 파일 스코프를 가져 에러가 발생하지 않는다.

### 참조에 의한 전달과 외부 상태 변경
- 원시 타입은 부수 효과가 발생하지 않지만 객체 타입의 경우 함수 외부에서 함수 몸체 내부로 전달한 참조값에 의해 원본 객체가 변경되는 부수효과가 발생한다.
- 복잡한 코드에서 의도치 않은 객체의 변경을 추적하는 건 어려움으로 옵저버 패턴 등을 통해 객체를 참조 공유하는 모든 이들에게 변경 사실을 통지하고 이에 대처하는 대응이 필요하다.
- **해결법**
    - 불변 객체 사용 - 객체의 복사본을 새롭게 생성하는 비용은 들지만 객체의 상태 변경을 막고 변경이 필요한 경우엔 방어적 복사를 통해 원본 객체를 완전히 복제하는 깊은 복사를 해서 사용할 수 있다.
    - 순수 함수 - 외부 상태를 변경하지 않고 외부 상태에 의존하지 않는 함수
    - 함수형 프로그래밍 - 순수 함수를 통해 부수 효과를 최대한 억제하여 오류를 피하고 프로그램의 안정성을 높이려는 프로그래밍 패러다임

### 즉시 실행 함수
- 한 번만 호출되며 다시 호출할 수 없다.
- 익명 함수를 사용(함수 이름 없는거)하는 것이 일반적이며 기명 함수를 사용해도 되긴 한다.
- 반드시 그룹 연산자로 감싸야 한다.

### 재귀 함수
- 자기 자신을 호출하는 함수
- 반복문 없이 구현할 수 있다
- 함수 표현식으로 정의한 함수 내부에서는 함수 이름은 물론 함수를 가리키는 식별자로도 자기 자신을 재귀 호출할 수 있다.
- 스택 오버플로를 막기 위해 탈출 조건을 반드시 구현해야 한다.
- for문이나 while문으로 대부분 변경 가능하다.

### 중첩함수(내부함수)
- 외부 함수 내부에서만 호출 가능
- 외부 함수를 돕는 헬퍼 함수의 역할
- ES6부터 if 문이나 for문 안에서도 정의 가능하나 바람직하지 않다.

### 콜백함수
- 함수의 변하지 않는 공통 로직은 미리 정의해 두고 경우에 따라 변경되는 로직은 추상화해서 함수 외부에서 함수 내부로 전달
- 함수의 매개변수를 통해 다른 함수의 내부로 전달되는 함수
- 고차함수 - 매개변수를 통해 함수의 외부에서 콜백함수를 전달받은 함수
- 함수형 프로그래밍 패러다임 뿐 아니라 비동기 처리에 활용되는 중요한 패턴이며 전달 받는 함수가 자주 호출된다면 함수 외부에서 콜백 함수를 정의한 후 함수 참조를 고차 함수에 전달하는 방법도 있다.

### 순수 함수와 비순수 함수
- **순수 함수**
    - 부수 효과가 없는 함수 (=외부 상태를 변경하지 않는다.)
    - 동일한 인수가 전달되면 언제나 동일한 값을 반환하며 외부 상태에 의존하지 않고 매개변수를 통해 함수 내부로 전달된 인수에만 의존해 반환값을 만든다.
- **비순수 함수**
    - 외부 상태에 의존하는 함수이다.
    - 외부 상태를 변경하는 부수효과가 있다.